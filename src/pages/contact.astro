---
import Layout from "../layouts/Layout.astro";
import InteractiveAvatar from "../components/InteractiveAvatar.astro";

const emailUser = "peremontpeo";
const emailDomain = "gmail.com";

const socialLinks = [
  { name: "GitHub", url: "https://github.com/pmontp19", icon: "github" },
  { name: "LinkedIn", url: "https://linkedin.com/in/perem", icon: "linkedin" },
  { name: "Twitter", url: "https://twitter.com/pmontp19", icon: "twitter" },
];
---

<Layout title={"Contacte | Pere Montpeó"}>
  <div class="section">
    <div class="contact-header">
      <InteractiveAvatar />
      <p class="subtitle animate" style="animation-delay: 0.1s;">
        Tens alguna pregunta o vols col·laborar? Aquí tens com pots
        contactar-me.
      </p>
    </div>

    <div class="contact-info animate" style="animation-delay: 0.2s;">
      <div class="contact-item card">
        <h3>Correu Electrònic</h3>
        <p>La millor manera de contactar amb mi és per correu electrònic:</p>
        <span
          id="email-link-placeholder"
          class="button-link"
          data-user={emailUser}
          data-domain={emailDomain}
        >
          Carregant correu...
        </span>
      </div>

      <div class="contact-item card">
        <h3>Xarxes Socials</h3>
        <p>També em pots trobar en aquestes plataformes:</p>
        <ul class="social-links-list">
          {
            socialLinks.map((link) => (
              <li>
                <a
                  href={link.url}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="button-link"
                >
                  {link.icon === "github" && (
                    <svg
                      viewBox="0 0 16 16"
                      width="24"
                      height="24"
                      fill="currentColor"
                      style="vertical-align: middle; margin-right: 0.5rem;"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38
                      0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01
                      1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12
                      0 0 .67-.21 2.2.82a7.65 7.65 0 012-.27c.68.003 1.36.092 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82
                      1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013
                      0 0016 8c0-4.42-3.58-8-8-8z"
                      />
                    </svg>
                  )}
                  {link.icon === "linkedin" && (
                    <svg
                      viewBox="0 0 24 24"
                      width="24"
                      height="24"
                      fill="currentColor"
                      style="vertical-align: middle; margin-right: 0.5rem;"
                    >
                      <path
                        d="M20.447 20.452H17.2v-5.569c0-1.327-.028-3.037-1.849-3.037-1.85 0-2.134
                      1.445-2.134 2.939v5.667H10.6V9h3.1v1.561h.045c.431-.81 1.486-1.665 3.055-1.665 3.268 0 3.872 2.151 3.872 4.944v6.612zM5.337 
                      7.433a1.8 1.8 0 11-.001-3.6 1.8 1.8 0 01.001 3.6zm1.697 13.019H3.64V9h3.394v11.452zM22.225 
                      0H1.771C.792 0 0 .771 0 1.723v20.554C0 23.229.792 24 1.771 24h20.451C23.2 24 24 23.229 24 22.277V1.723C24 .771 23.2 0 22.225 0z"
                      />
                    </svg>
                  )}
                  {link.icon === "twitter" && (
                    <svg
                      viewBox="0 0 24 24"
                      width="24"
                      height="24"
                      fill="currentColor"
                      style="vertical-align: middle; margin-right: 0.5rem;"
                    >
                      <path
                        d="M23.954 4.569c-.885.392-1.83.656-2.825.775
                      1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127
                      1.184-.897-.959-2.178-1.555-3.594-1.555-2.717 0-4.92 2.204-4.92 4.917 0 .39.045.765.127 
                      1.124-4.087-.205-7.713-2.165-10.141-5.144-.422.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 
                      4.099-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 
                      0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.416-1.68 1.319-3.809 2.105-6.102 2.105-.39 
                      0-.779-.023-1.17-.067 2.189 1.397 4.768 2.209 7.557 2.209 9.054 0 14-7.496 14-13.986 0-.21 
                      0-.423-.015-.635.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"
                      />
                    </svg>
                  )} {link.name}
                </a>
              </li>
            ))
          }
        </ul>
      </div>
    </div>
  </div>
</Layout>

<script is:inline>
  // Simple email obfuscation script
  document.addEventListener("DOMContentLoaded", () => {
    const placeholder = document.getElementById("email-link-placeholder");
    if (placeholder) {
      const user = placeholder.getAttribute("data-user");
      const domain = placeholder.getAttribute("data-domain");
      if (user && domain) {
        const email = `${user}@${domain}`;
        placeholder.textContent = email; // Display the email text
        placeholder.setAttribute("href", `mailto:${email}`); // Set the mailto link
        // Make it behave like a link (optional, as it's styled like one)
        placeholder.onclick = () => {
          window.location.href = `mailto:${email}`;
        };
        placeholder.style.cursor = "pointer";
      } else {
        placeholder.textContent = "Error al carregar el correu.";
      }
    }
  });
</script>

<style>
  .contact-header {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  .subtitle {
    font-size: 1.25rem;
    margin-top: 1rem;
    color: var(--text-muted);
  }

  .contact-header h1 {
    margin-top: 1.5rem;
    margin-bottom: 0.5rem;
  }

  .contact-item {
    margin-bottom: 1.5rem;
  }

  .contact-item h3 {
    margin-top: 0;
    margin-bottom: 0.75rem;
  }

  .social-links-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
  }

  .social-links-list li {
    margin-bottom: 0;
  }

  @media (min-width: 768px) {
    .contact-info {
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
  }

  /* Ensure the placeholder looks like the button link */
  #email-link-placeholder {
    display: inline-flex; /* Match button-link display */
    align-items: center; /* Match button-link alignment */
    gap: 0.5rem; /* Match button-link gap */
    /* Inherit other styles from .button-link via the class */
  }
</style>
